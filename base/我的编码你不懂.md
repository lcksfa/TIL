# 编码到底是个啥

> 这里的编码不是指编写代码，而是字符的编码方式；

先提出几个问题：
1. utf8和 unincode是一回事么？
2. ANSI编码和 ASCII码是什么
3. 宽字节 和窄字节又是什么
4. 国标码和utf8 有什么不同？

首先 明确一点，计算机只认识0和1，所以计算机不管是存还是读取都是基于0和1的序列；
而把这些0和1组成的序列组织起来变成人类可读的文字就是__编码标准__需要完成的工作了。

打开sublime的encoding列表，我们可以看到编码标准是真的多，每个地区和国家似乎都想把0和1的序列定义一下然后组成自己国家的文字，可以，这带来了很大的麻烦。特别是在全球互联的背景下。因为A国的01序列组成的A国标准的文字编码到了B国会按B国的文字编码重新解读，于是在B国人们的解读下，就是一团乱码，形成了`我的编码你不懂`的状况。

## Unicode
于是Unicode出来了，被称为世界级的标准字符集，里面拟定了所有国家所有地区的文字的全集。不论英语、中文、俄语还是什么不知名的语种，unicode无所不包。那么你可能会问，字符集又是什么呢？还是回到计算机的原理说起，计算机只认识0和1 ，人们自然也只能使用0和1组成的序列来组成字符集了，于是在unicode里，比如说41标示A。可以这么说，人们把数字从0往后数，每个数字都标示一个字。因为英语的特殊地位，它自然在数数的最前头。

所以，__我认为所谓字符集就是定义了数字和字的映射关系__；不够unicode做的大，把世界上所有的文字都映射进去了；

## UTF-8 和UTF-16
UTF 是 A Unicode transformation format 的简写；

使用Unicode的数字和字的映射关系的编码方式 主要是UTF-8 和UTF-16；
现在回头看看UTF-8，现在我们就需要把这些数在计算机里表示出来了，可以说UTF-8是最折中的表示方案，它先使用8位bit表示一个数字，比如1，2，3的表示方式为`0000 0001` `0000 0010` ` 0000 0011`,值得注意的是，这里的1 2 3并不是真实的我们语言世界里的 1 2 3 ，而需要查询[Unicode映射表](https://unicode-table.com/en/#0001)后知道数字1 对应的值 为 SOH ,2 对应STX ，3对应ETX；

不过，我们知道，8位的2进制数最大只能到255，大于255的数字怎么表示呢？再往8位里面加8位序列，扩容，也就是变成了16位表示一个更大的数；事实上utf-8编码 到了007F 后即开始使用16位表示更大的数了；
而更大的数字则使用更多的数位表示，目前最大到了32位；具体的编码方式 [参看这里](https://naveenr.net/unicode-character-set-and-utf-8-utf-16-utf-32-encoding/)

UTF-16 同UTF-8 理解一样，使用16位表示最初的数字，UTF-16编码是一种可变字节编码方案，它使用2个字节或4个字节来表示unicode代码点。 所有现代语言的大多数字符都使用2个字节表示。如 1 的表示为 `00000000 0000 0001`仍然表示Unicode里的SOH。不能把UTF-16理解为一个16位的编码方式；

同理的：UTF-32 编码是固定字节编码方案，它使用4个字节来表示所有代码点。

现在我们来回答 第一个问题：
unicode 是一个字符集标准，它规定了数字和具体的字之间的映射关系；
而UTF-家族是unicode里的数字（代码点）的编码实现方式；

## ANSI编码
American National Standards Institute （美国国家标准协会）

ANSI编码是一个稍微通用的术语，用于指代系统上的标准代码页，通常是Windows。 在西方/美国，它被更恰当地称为Windows-1252.系统。 （它可以代表其他系统上的某些其他Windows代码页。）这实际上是ASCII字符集的扩展，因为它包含所有带有128个字符代码的ASCII字符。 这种差异是由于“ANSI”编码是8位而不是7位，因为ASCII是（ASCII现在几乎总是编码为8位字节，MSB设置为0）。 名称“ANSI”用词不当，因为它不符合任何实际的ANSI标准，但名称已卡住。 ANSI与UTF-8不同。

严格来说，没有ANSI编码这样的东西。 通俗地，术语ANSI用于几种不同的编码：`ISO 8859-1`` Windows CP1252` Windows机器上的当前系统编码（在Win32 API术语中）。

维基百科的定义：
`
ANSI character set
From Wikipedia, the free encyclopedia
Jump to navigationJump to search
The phrase ANSI character set has no well-defined meaning and has been used to refer to the following, among other things:

Windows code pages, a collection of 8-bit character sets compatible with ASCII but incompatible with each other, especially those code pages that are partly compatible with ISO-8859, most commonly Windows Latin 1
Windows-1252 is referred to as "ANSI" especially often.
Code page 437, the character set of the original IBM PC (especially in the context of ANSI art which is used as graphics especially in BBS and made as demoscene products.)
ASCII, a 7-bit character set. (Very rarely.)
ANSEL, the American National Standard for Extended Latin Alphabet Coded Character Set. (Very rarely.)
ISO-8859, a collection of 8-bit character sets compatible with ASCII. (Very rarely.)

ANSI字符集没有明确定义的含义，并且用于指代以下内容：
Windows代码页，
8位字符的集合 与ASCII兼容但彼此不兼容的集合，
尤其是那些与ISO-8859部分兼容的代码页，最常见的是Windows Latin 1 
Windows-1252特别经常被称为“ANSI”。 代码页437，
原始IBM PC的字符集（特别是在ANSI艺术的上下文中，特别是在BBS中用作图形并作为demoscene产品。）
ASCII，一个7位字符集。 （非常罕见。）
ANSEL，扩展拉丁字母编码字符集的美国国家标准。 （非常罕见。）
ISO-8859，与ASCII兼容的8位字符集的集合。 （非常稀有。）
`

## ASCII码
ASCII只定义了一个带有128个符号的7位代码页

回答第二个问题，在windows系统中，使用ANSI编码概念完全是个误会，是指代windows的代码页，所以我们经常使用不同的代码页转换来却换字符编码，而ascii是一个只包含少量符号和英文的字符集，由7位bit表示；


## 宽字节 和窄字节
在win32开发中一个项目的字符集一般分为Unicode字符集和多字节字符集，一般我们会选择Unicode字符集，因为这样很方便我们开发，值得一提的是，Unicode字符集也许我们很熟悉，平时所说的宽字节就是Unicode，多字节就是指的ANSI，GB等。

这些从ANSI标准派生的字符集被习惯的统称为ANSI字符集，这样的字符集有很多，我们常见的GB-2312就是其中之一。它们正式的名称应该是MBCS(Multi-Byte Chactacter System，即多字节字符系统)。这些派生字符集的特点是以ASCII 127 bits为基础，兼容ASCII 127，他们使用大于128的编码作为一个Leading Byte，紧跟在Leading Byte后的第二（甚至第三）个字符与Leading Byte一起作为实际的编码。 


## big endian和little endian 

big endian和little endian是CPU处理多字节数的不同方式。例如“汉”字的Unicode编码是6C49。那么写到文件里时，究竟是将6C写在前面，还是将49写在前面？如果将6C写在前面，就是big endian。还是将49写在前面，就是little endian。 
